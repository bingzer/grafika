var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},Grafika=function(){function a(){var b=this;this.version=a.VERSION,this.animation={},this.frames=[],this.selectedGraphics=[],this.copiedSelectedGraphics=[],this.renderers=[],this.callback=new a.DefaultCallback(this),this.isPainting=!1,this.isMovingGraphics=!1,this.animator=void 0,this.options=new a.DefaultOption,this.plugins=[],this.scale={x:1,y:1},this.commando=new a.CommandManager(this),this.initialize=function(c,d,e){a.log(b,"-------- v"+b.version+" --------"),b.validateCanvas(c),b.registerRenderer(new a.BackgroundLayerRenderer(b)),b.registerRenderer(new a.BackgroundColorRenderer(b)),b.registerRenderer(new a.BackgroundImageRenderer(b)),b.registerRenderer(new a.RectangleRenderer(b)),b.registerRenderer(new a.SquareRenderer(b)),b.registerRenderer(new a.CircleRenderer(b)),b.registerRenderer(new a.OvalRenderer(b)),b.registerRenderer(new a.FreeformRenderer(b)),b.registerRenderer(new a.TriangleRenderer(b)),b.registerRenderer(new a.LineRenderer(b)),b.registerRenderer(new a.TextRenderer(b)),b.registerRenderer(b.layerRenderer=new a.LayerRenderer(b)),b.registerRenderer(b.frameRenderer=new a.FrameRenderer(b)),b.registerRenderer(b.animRenderer=new a.AnimationRenderer(b)),b.registerRenderer(b.defaultRenderer=new a.DefaultRenderer(b)),b.setAnimation(e),b.setOptions(d),a.Plugins&&a.Plugins.forEach(function(c){var d=c(b);a.log(b,"Plugin: "+d.name+" v. "+d.version),b.plugins.push(d)}),a.log(b,"Grafika v."+b.version+" [initialized]"),b.callback.on(a.EVT_INITIALIZED)},this.destroy=function(){b.selectedGraphics=[],b.isPlaying()&&b.pause(),b.setAnimation(b.animRenderer.create()),b.frame=b.frameRenderer.create(),b.frames=[b.frame],b.commando.clearActions(),b.clearFrame(),b.callback.on(a.EVT_DESTROYED)},this.getAnimation=function(){return b.animation},this.setAnimation=function(c){if(b.animation=b.animRenderer.create(c),!b.animation.name)throw new Error("Animation name is required");if(!b.animation.width||!b.animation.height)throw new Error("Animation width + height is required");a.log(b,"Animation ("+b.animation.localId+") name: "+b.animation.name+", timer: "+b.animation.timer+", size: "+b.animation.width+" x "+b.animation.height),b.scale.x=b.animation.width/(b.context.canvas.width||b.animation.width),b.scale.y=b.animation.height/(b.context.canvas.height||b.animation.height),b.context.scale(b.scale.x,b.scale.y),b.contextDrawing.scale(b.scale.x,b.scale.y),b.contextBackground.scale(b.scale.x,b.scale.y),b.context.canvas.setAttribute("width",""+b.animation.width),b.context.canvas.setAttribute("height",""+b.animation.height),b.contextBackground.canvas.setAttribute("width",""+b.animation.width),b.contextBackground.canvas.setAttribute("height",""+b.animation.height),b.contextDrawing.canvas.setAttribute("width",""+b.animation.width),b.contextDrawing.canvas.setAttribute("height",""+b.animation.height),b.setFrames(b.frames)},this.saveAnimation=function(c){c&&(b.animation=b.animRenderer.create(c)),b.animation.totalFrame=b.frames.length,b.animation.modified=!1,b.animation.dateModified=Date.now(),b.animation.client={version:b.version,browser:navigator.userAgent},b.callback.on(a.EVT_ANIMATION_SAVED)},this.play=function(){function c(a){d||(d=a);var b=a-d;if(b>e.animation.timer)if(d=a,e.animation.currentFrame>=e.frames.length-1){if(!e.options.loop)return e.pause();e.animation.currentFrame=0,e.navigateTo(e.animation.currentFrame,!1)}else e.navigateTo(e.animation.currentFrame+1,!1);e.animator=window.requestAnimationFrame(c)}if(!b.animator){b.animation.timer||(b.animation.timer=500),a.log(b,"Animation started. Timer: "+b.animation.timer+" ms");var d,e=b;b.animator=window.requestAnimationFrame(c),b.callback.on(a.EVT_FRAME_COUNT,b.frames.length),b.callback.on(a.EVT_PLAYING,!0),b.navigateToFrame(0)}},this.pause=function(){b.isPlaying()&&(window.cancelAnimationFrame(b.animator),b.animator=void 0,b.callback.on(a.EVT_PLAYING,!1),a.log(b,"Animation stopped"))},this.isPlaying=function(){return a.isDefined(b.animator)},this.isModified=function(){return b.animation.modified?!0:!!b.frame.modified},this.save=function(){b.saveAnimation(),b.saveFrame()},this.getScale=function(){return b.scale},this.addResource=function(a){for(var c=0;c<b.animation.resources.length;c++)if(b.animation.resources[c].id===a.id)return;var d=b.getResourceRenderer(a).create(a);b.animation.resources.push(d)},this.hasResource=function(a){for(var c=0;c<b.animation.resources.length;c++)if(b.animation.resources[c].id===a)return!0;return!1},this.getResource=function(a){for(var c=0;c<b.animation.resources.length;c++)if(b.animation.resources[c].id===a)return b.animation.resources[c];return null},this.deleteResource=function(a){for(var c=0;c<b.animation.resources.length;c++)if(b.animation.resources[c].id===a){b.animation.resources.splice(c,1);break}for(var c=0;c<b.frames.length;c++)b.frames[c].backgroundResourceId==a&&delete b.frames[c].backgroundResourceId;b.refreshFrame({drawBackground:!0})},this.getResources=function(){return b.animation.resources},this.getLayer=function(){return b.frame.layers[0]},this.refreshFrame=function(c){void 0===c&&(c={keepCurrentGraphic:!1,keepSelectedGraphics:!1,drawBackground:!1}),!a.isUndefined(c.keepCurrentGraphic)&&c.keepCurrentGraphic||(b.currentGraphic=null),!a.isUndefined(c.keepSelectedGraphics)&&c.keepSelectedGraphics||(b.selectedGraphics=[]),c.drawBackground&&b.frameRenderer.drawBackground(b.contextBackground,b.frame),a.clearCanvas(b.context),b.frameRenderer.draw(b.context,b.frame)},this.getFrame=function(){return b.frame},this.getFrames=function(){return b.frames},this.clearFrame=function(){b.frame=b.frameRenderer.create(),b.commando.clearActions(),b.refreshFrame()},this.setFrames=function(c){(a.isUndefined(c)||0==c.length)&&(c=[b.frameRenderer.create()]),b.frames=c,b.animation.totalFrame=b.frames.length,b.frame=b.frames[0],b.navigateToFrame(0),b.callback.on(a.EVT_FRAME_COUNT,b.animation.totalFrame)},this.saveFrame=function(){b.frame.modified=!1,b.frames[b.animation.currentFrame]=b.frame,b.callback.on(a.EVT_FRAME_SAVED,b.animation.currentFrame)},this.setFrameBackground=function(c){if(!a.isUndefined(c)){if("string"==typeof c||c.id){var d=c.id||c;if(b.hasResource(d)||"string"==typeof c||b.addResource(c),!b.hasResource(d))throw new Error("'"+d+"' is not a resource");b.frame.backgroundResourceId=d}else c.backgroundColor&&(b.frame.backgroundColor=c.backgroundColor);b.refreshFrame({drawBackground:!0})}},this.nextFrame=function(){return b.navigateToFrame(b.animation.currentFrame+1)},this.previousFrame=function(){return b.navigateToFrame(b.animation.currentFrame-1)},this.navigateToFrame=function(a){return b.navigateTo(a,!0)},this.findSelectedGraphics=function(c,d){var e;b.selectedGraphics=[];for(var f=0;f<b.frame.layers.length;f++)for(var g=b.frame.layers[f],h=0;h<g.graphics.length;h++)e=g.graphics[h],b.getGraphicRenderer(e).contains(e,c,d)&&b.selectedGraphics.push(e);if(b.selectedGraphics.length>1){for(var i=b.selectedGraphics[0],j=a.calculateFurthestDistance(c,d,i),f=1;f<b.selectedGraphics.length;f++)a.calculateFurthestDistance(c,d,b.selectedGraphics[f])<j&&(i=b.selectedGraphics[f]);return b.selectedGraphics=[i]}return b.selectedGraphics},this.findGraphic=function(a){for(var c=a&&a.id||a,d=b.getLayer(),e=0;e<d.graphics.length;e++)if(d.graphics[e].id==c)return d.graphics[e];return null},this.selectGraphic=function(a){var c=a&&a.id||a,d=b.findGraphic(c);return d&&(b.selectedGraphics=[d],b.refreshFrame({keepSelectedGraphics:!0})),d},this.deleteGraphic=function(a,c){void 0===c&&(c=!0);var d=b.selectGraphic(a);return b.deleteSelectedGraphics(c),d},this.getSelectedGraphics=function(){return b.selectedGraphics},this.deleteSelectedGraphics=function(c){void 0===c&&(c=!0),b.frame.modified=!0;for(var d=[],e=b.getLayer().graphics,f=0;f<e.length;f++){for(var g=!1,h=0;h<b.selectedGraphics.length&&(e[f].id!=b.selectedGraphics[h].id||!(g=!0));h++);g||d.push(e[f])}b.getLayer().graphics=d,c&&a.isDefined(b.selectedGraphics[0])&&(b.callback.on(a.EVT_GRAPHIC_DELETED),b.commando.addAction(new a.GraphicDeleted(b,b.selectedGraphics[0]))),b.refreshFrame()},this.copySelectedGraphics=function(){if(b.selectedGraphics){b.copiedSelectedGraphics=a.clone(b.selectedGraphics);for(var c=0;c<b.copiedSelectedGraphics.length;c++)b.copiedSelectedGraphics[c].id=a.randomUid();b.callback.on(a.EVT_GRAPHIC_COPIED)}},this.pasteSelectedGraphics=function(){if(b.copiedSelectedGraphics){b.selectedGraphics=a.clone(b.copiedSelectedGraphics);for(var c=0;c<b.selectedGraphics.length;c++)b.selectedGraphics[c].id=a.randomUid();b.setOptions({drawingMode:a.MODE_SELECT}),b.getLayer().graphics=b.getLayer().graphics.concat(b.selectedGraphics),b.refreshFrame({keepSelectedGraphics:!0}),b.callback.on(a.EVT_GRAPHIC_PASTED),b.commando.addAction(new a.GraphicPasted(b,b.selectedGraphics[0]))}},this.getCurrentGraphic=function(){return b.currentGraphic},this.getOptions=function(){return b.options},this.getCanvas=function(){return b.context.canvas},this.getCanvasContext=function(){return b.context},this.setCallback=function(c){if(a.isUndefined(c))throw new Error("callback cannot be undefined");b.callback=c},this.setOptions=function(c){if(c){var d=!1,e=!1;if(c.backgroundColor&&(b.options.backgroundColor=c.backgroundColor,b.frame.backgroundColor=b.options.backgroundColor,b.frame.modified=!0,d=!0,e=!0),c.foregroundColor&&(b.options.foregroundColor=c.foregroundColor,b.frame.foregroundColor=b.options.foregroundColor,d=!0),c.brushSize&&(b.options.brushSize=c.brushSize),c.graphic&&(b.options.graphic=c.graphic,d=!0),a.isDefined(c.graphicFill)&&null!=c.graphicFill&&(b.options.graphicFill=c.graphicFill,d=!0),a.isDefined(c.useCarbonCopy)&&null!=c.useCarbonCopy&&(b.options.useCarbonCopy=c.useCarbonCopy,d=!0),a.isDefined(c.useNavigationText)&&null!=c.useNavigationText&&(b.options.useNavigationText=c.useNavigationText,d=!0),a.isDefined(c.navigationTextX)&&null!=c.navigationTextX&&(b.options.navigationTextX=c.navigationTextX,d=!0),a.isDefined(c.navigationTextY)&&null!=c.navigationTextY&&(b.options.navigationTextY=c.navigationTextY,d=!0),a.isDefined(c.loop)&&null!=c.loop&&(b.options.loop=c.loop),c.drawingMode){var f=c.drawingMode.toLowerCase();if(f!=a.MODE_NONE&&f!=a.MODE_PAINT&&f!=a.MODE_SELECT)throw new Error("Drawing mode is not supported: "+f);b.options.drawingMode=f,b.options.drawingMode!=a.MODE_PAINT&&b.options.drawingMode!=a.MODE_NONE||(d=!0)}a.isDefined(c.debugMode)&&null!=c.debugMode&&(b.options.debugMode=c.debugMode),d&&b.refreshFrame({drawBackground:e})}},this.registerRenderer=function(a){return b.renderers.push(a),a},this.getRenderer=function(a){for(var c=0;c<b.renderers.length;c++)if(b.renderers[c].canRender(a))return b.renderers[c];return b.defaultRenderer},this.getResourceRenderer=function(a){return b.getRenderer(a)},this.getGraphicRenderer=function(a){return b.getRenderer(a)},this.canUndo=function(){return b.commando.canUndo()},this.canRedo=function(){return b.commando.canRedo()},this.undo=function(){return b.commando.undo()},this.redo=function(){return b.commando.redo()},this.getName=function(){return"[Grafika "+b.version+"]"},this.isLogEnabled=function(){return b.options.debugMode}}return a.prototype.validateCanvas=function(a){var b=this;if(!a)throw new Error("canvasId is required");var c=document.querySelector(a)||document.getElementById(a);if(!c)throw new Error("No element found for "+a+".");c.width=0,c.height=0,c.style.zIndex="0",c.style.width="100%",c.style.height="100%",c.style.position="absolute",c.style.left="0px";var d=document.createElement("canvas");d.id=c.id+"-background",d.style.zIndex="-10",d.style.width="100%",d.style.height="100%",d.style.position="absolute",d.style.left="0px";var e=document.createElement("canvas");e.id=c.id+"-drawing",e.style.zIndex="10",e.style.width="100%",e.style.height="100%",e.style.left="0px",e.addEventListener("mousedown",function(a){return b.onMouseDown(a)}),e.addEventListener("touchstart",function(a){return b.onMouseDown(a)}),e.addEventListener("mousemove",function(a){return b.onMouseMove(a)}),e.addEventListener("touchmove",function(a){return b.onMouseMove(a)}),e.addEventListener("mouseup",function(a){return b.onMouseUp(a)}),e.addEventListener("touchend",function(a){return b.onMouseUp(a)}),e.addEventListener("mouseleave",function(a){return b.onMouseUp(a)}),e.addEventListener("touchleave",function(a){return b.onMouseUp(a)}),this.context=c.getContext("2d"),this.context.lineJoin="round",this.context.lineCap="round",this.contextBackground=d.getContext("2d"),this.contextBackground.lineJoin="round",this.contextBackground.lineCap="round",this.contextDrawing=e.getContext("2d"),this.contextDrawing.lineJoin="round",this.contextDrawing.lineCap="round",this.context.setLineDash||(this.context.setLineDash=function(){}),this.contextBackground.setLineDash||(this.contextBackground.setLineDash=function(){}),this.contextDrawing.setLineDash||(this.contextDrawing.setLineDash=function(){});var f=this.context.canvas.parentElement;return this.canvasWrapper=document.createElement("div"),this.canvasWrapper.id=this.context.canvas.id+"-wrapper",this.canvasWrapper.style.position="relative",this.canvasWrapper.style.display="flex",c.parentElement.removeChild(c),this.canvasWrapper.appendChild(d),this.canvasWrapper.appendChild(c),this.canvasWrapper.appendChild(e),f.appendChild(this.canvasWrapper),c},a.prototype.navigateTo=function(b,c){0>=b&&(b=0),c&&this.saveFrame(),this.animation.currentFrame=b,this.frame=this.frames[this.animation.currentFrame],this.frame||(this.frame=this.frameRenderer.create()),c&&this.frame.modified&&this.saveFrame(),this.refreshFrame({drawBackground:!0}),this.callback.on(a.EVT_FRAME_CHANGED,this.animation.currentFrame),this.callback.on(a.EVT_FRAME_COUNT,this.frames.length),this.commando.clearActions()},a.prototype.onMouseDown=function(b){if(b&&!this.isPlaying()&&(navigator.userAgent.match(/Android/i)&&b.preventDefault(),("mousedown"!==b.type||1==b.which)&&!this.isPlaying())){var c=a.calculateCoordinates(this.scale,b);if(this.options.drawingMode==a.MODE_SELECT){var d=this.findSelectedGraphics(c.x,c.y);if(d.length>0)return this.isMovingGraphics=!0,this.selectedGraphics=d,this.refreshFrame({keepSelectedGraphics:!0}),this.callback.on(a.EVT_GRAPHIC_SELECTED,this.selectedGraphics[0].id),void(this.graphicBeforeMoving=a.clone(this.selectedGraphics[0]));this.isMovingGraphics=!1,this.selectedGraphics=[],this.options.drawingMode=a.MODE_PAINT,this.refreshFrame({keepSelectedGraphics:!0}),this.callback.on(a.EVT_GRAPHIC_SELECTED,void 0)}if(this.options.drawingMode==a.MODE_PAINT){this.isPainting=this.options.drawingMode==a.MODE_PAINT;var e=this.getGraphicRenderer(this.options.graphic);this.currentGraphic=e.create(),this.currentGraphic.isFilled=this.options.graphicFill,this.currentGraphic.x=c.x,this.currentGraphic.y=c.y,this.currentGraphic.brushSize=this.options.brushSize,this.currentGraphic.backgroundColor=this.options.backgroundColor,this.currentGraphic.foregroundColor=this.options.foregroundColor,e.invoke(this.context,this.currentGraphic,"mousedown",c.x,c.y),e.draw(this.contextDrawing,this.currentGraphic)}}},a.prototype.onMouseMove=function(b){if(b&&!this.isPlaying()){var c=a.calculateCoordinates(this.scale,b);if(this.isMovingGraphics&&this.selectedGraphics.length>0){this.lastX||(this.lastX=c.x),this.lastY||(this.lastY=c.y);for(var d=0;d<this.selectedGraphics.length;d++)this.getGraphicRenderer(this.selectedGraphics[d]).move(this.context,this.selectedGraphics[d],c.x,c.y,this.lastX,this.lastY);return this.lastX=c.x,this.lastY=c.y,void this.refreshFrame({keepSelectedGraphics:!0})}if(this.isPainting&&this.currentGraphic){var e=this.getGraphicRenderer(this.currentGraphic);a.clearCanvas(this.contextDrawing),e.invoke(this.context,this.currentGraphic,"mousemove",c.x,c.y),e.draw(this.contextDrawing,this.currentGraphic)}}},a.prototype.onMouseUp=function(b){if(b&&!this.isPlaying()){var c=a.calculateCoordinates(this.scale,b);if(a.clearCanvas(this.contextDrawing),this.isPlaying()&&"mouseup"==b.type)return void this.pause();if(this.frame.modified=!0,this.isMovingGraphics){this.isMovingGraphics=!1,this.refreshFrame({keepSelectedGraphics:!0}),this.callback.on(a.EVT_FRAME_UPDATED,this.frame.index),this.callback.on(a.EVT_GRAPHIC_MOVED,this.selectedGraphics[0].id);({x:this.lastX,y:this.lastY});return this.selectedGraphics[0].x==this.graphicBeforeMoving.x&&this.selectedGraphics[0].y==this.graphicBeforeMoving.y||this.commando.addAction(new a.GraphicMoved(this,this.selectedGraphics[0],this.graphicBeforeMoving)),this.graphicBeforeMoving=void 0,this.lastX=null,void(this.lastY=null)}if(this.isPainting){var d=this.getGraphicRenderer(this.currentGraphic);d.invoke(this.context,this.currentGraphic,"mouseup",c.x,c.y),this.currentGraphic&&d.isValid(this.currentGraphic)&&(this.getLayer().graphics.push(this.currentGraphic),this.callback.on(a.EVT_FRAME_UPDATED,this.frame.index),this.callback.on(a.EVT_GRAPHIC_CREATED,this.currentGraphic.id),this.commando.addAction(new a.GraphicCreated(this,this.currentGraphic))),this.refreshFrame(),this.isPainting=!1}}},a}(),Grafika;!function(a){a.Plugins=[],a.VERSION="1.0.4",a.MODE_NONE="none",a.MODE_PAINT="paint",a.MODE_SELECT="select",a.EVT_INITIALIZED="initialized",a.EVT_DESTROYED="destroyed",a.EVT_PLAYING="playing",a.EVT_ANIMATION_SAVED="animationSaved",a.EVT_FRAME_COUNT="frameCount",a.EVT_FRAME_UPDATED="frameUpdated",a.EVT_FRAME_CHANGED="frameChanged",a.EVT_FRAME_SAVED="frameSaved",a.EVT_GRAPHIC_CREATED="graphicCreated",a.EVT_GRAPHIC_SELECTED="graphicSelected",a.EVT_GRAPHIC_MOVED="graphicMoved",a.EVT_GRAPHIC_COPIED="graphicCopied",a.EVT_GRAPHIC_PASTED="graphicPasted",a.EVT_GRAPHIC_DELETED="graphicDeleted";var b=function(){function a(){this.backgroundColor="#ffffff",this.foregroundColor="#000000",this.brushSize=5,this.graphic="freeform",this.graphicFill=!1,this.useCarbonCopy=!0,this.useNavigationText=!0,this.navigationTextX=15,this.navigationTextY=40,this.debugMode=!0,this.drawingMode="none",this.loop=!1}return a}();a.DefaultOption=b;var c=function(){function b(b){var c=this;this.grafika=b,this.on=function(b,d){return a.log(c.grafika,"[callback] "+b,d)}}return b}();a.DefaultCallback=c}(Grafika||(Grafika={}));var Grafika;!function(a){var b=function(){function a(a){if(this.grafika=a,!a)throw new Error("An instance of grafika is required")}return a.prototype.canRender=function(a){return a&&a.type===this.getRenderingType()||a===this.getRenderingType()},a}();a.Renderer=b;var c=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.create=function(a){return null},b.prototype.draw=function(a,b){},b.prototype.getRenderingType=function(){return null},b.prototype.canRender=function(a){return!0},b}(b);a.DefaultRenderer=c;var d=function(b){function c(){b.apply(this,arguments)}return __extends(c,b),c.prototype.create=function(b){return b||(b={}),b._id=b._id,b.localId=b.localId||a.randomUid(),b.name=b.name||b.localId,b.description=b.description||b.description,b.timer=b.timer||500,b.width=b.width||window.innerWidth,b.height=b.height||window.innerHeight,b.dateCreated=b.dateCreated||Date.now(),b.dateModified=b.dateModified||b.dateCreated,b.views=b.views||0,b.rating=b.rating||0,b.category=b.category||b.category,b.isPublic=b.isPublic||b.isPublic,b.author=b.author||b.author,b.userId=b.userId||b.userId,b.thumbnailUrl=b.thumbnailUrl||b.thumbnailUrl,b.totalFrame=b.totalFrame||0,b.currentFrame=b.currentFrame||0,b.modified=b.modified||!1,b.resources=b.resources||[],b},c.prototype.draw=function(a,b){throw new Error},c.prototype.getRenderingType=function(){return"animation"},c}(b);a.AnimationRenderer=d;var e=function(b){function c(a){b.call(this,a),this.backgroundColorRenderer=this.grafika.getResourceRenderer("background-color"),this.backgroundImageRenderer=this.grafika.getResourceRenderer("background-image"),this.backgroundLayerRenderer=this.grafika.getResourceRenderer("background-layer"),this.layerRenderer=this.grafika.getRenderer("layer")}return __extends(c,b),c.prototype.create=function(b){return b||(b={type:"frame"}),b.id=b.id||a.randomUid(),b.index=b.index>=0?b.index:this.grafika.getAnimation().currentFrame||0,b.modified=b.modified||!0,b.backgroundResourceId=b.backgroundResourceId||void 0,b.backgroundColor=b.backgroundColor||this.grafika.getOptions().backgroundColor,b.foregroundColor=b.foregroundColor||this.grafika.getOptions().foregroundColor,b.layers=b.layers||[this.layerRenderer.create()],b.type="frame",b},c.prototype.draw=function(a,b){var c=this.grafika.getOptions(),d=this.grafika.getAnimation(),e=this.grafika.getFrames(),f=this.grafika.getScale();if(c.useCarbonCopy&&d.currentFrame>0){var g=e[d.currentFrame-1];g&&this.drawLayers(a,g,{carbonCopy:!0}),a.beginPath()}this.drawLayers(a,b),c.useNavigationText&&(a.fillStyle="gray",a.font="25px verdana",a.fontWeight="bold",a.fillText(d.currentFrame+1+" / "+e.length,c.navigationTextX*f.x,c.navigationTextY*f.y))},c.prototype.drawBackground=function(a,b,c){if(this.backgroundColorRenderer.draw(a,b),!b.backgroundResourceId)return void(c&&c());var d=this.grafika.getResource(b.backgroundResourceId);this.grafika.getResourceRenderer(d).draw(a,d,c)},c.prototype.drawLayers=function(a,b,c){void 0===c&&(c={carbonCopy:!1});for(var d=this.grafika.getSelectedGraphics(),e=this.grafika.getCurrentGraphic(),f=0;f<d.length;f++){var g=d[f],h=this.grafika.getGraphicRenderer(g),i=h.getBounds(g),j=g.brushSize/2;a.lineWidth=2,a.setLineDash([2,4]),"#000000"!=b.backgroundColor?a.strokeStyle="rgba(0, 0, 0, 0.5)":a.strokeStyle="rgba(255, 255, 255, 0.6)",a.strokeRect(i.x-j-2,i.y-j-2,i.width+2*j+4,i.height+2*j+4)}for(var f=0;f<b.layers.length;f++)this.layerRenderer.draw(a,b.layers[f],c);if(e){var h=this.grafika.getGraphicRenderer(e);h.draw(a,e)}},c.prototype.getRenderingType=function(){return"frame"},c}(b);a.FrameRenderer=e;var f=function(b){function c(a){b.call(this,a)}return __extends(c,b),c.prototype.create=function(b){return b||(b={type:"layer"}),b.id=b.id||a.randomUid(),b.index=b.index||0,b.graphics=b.graphics||[],b},c.prototype.draw=function(b,c,d){void 0===d&&(d={carbonCopy:!1});var e;b.setLineDash([]),b.lineJoin="round",b.lineCap="round";for(var f=0;f<c.graphics.length;f++){if(e=c.graphics[f],d.carbonCopy){var g=a.hexToRgb(e.foregroundColor);e.foregroundAlpha="rgba("+g.r+","+g.g+","+g.b+", 0.2)"}this.grafika.getGraphicRenderer(e).draw(b,e),delete e.foregroundAlpha}},c.prototype.getRenderingType=function(){return"layer"},c}(b);a.LayerRenderer=f;var g=function(b){function c(){b.apply(this,arguments)}return __extends(c,b),c.prototype.create=function(b){return b||(b={type:this.getRenderingType()}),b.id=b.id||a.randomUid("res"),b.type=b.type||this.getRenderingType(),b},c}(b);a.ResourceRenderer=g;var h=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.create=function(b){return b=a.prototype.create.call(this,b),b.graphics=b.graphics||void 0,b},b.prototype.draw=function(a,b,c){var d;a.setLineDash([]),a.lineJoin="round",a.lineCap="round";for(var e=0;e<b.graphics.length;e++)d=b.graphics[e],this.grafika.getGraphicRenderer(d).draw(a,d);c&&c(void 0,b)},b.prototype.getRenderingType=function(){return"background-layer"},b}(g);a.BackgroundLayerRenderer=h;var i=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.create=function(b){return b=a.prototype.create.call(this,b),b.backgroundColor=b.backgroundColor||"#ffffff",b},b.prototype.draw=function(a,b,c){a.beginPath(),a.rect(-2,-2,parseInt(a.canvas.getAttribute("width"))+2,parseInt(a.canvas.getAttribute("height"))+2),a.fillStyle=b.backgroundColor,a.fill(),c&&c(void 0,b)},b.prototype.getRenderingType=function(){return"background-color"},b}(g);a.BackgroundColorRenderer=i;var j=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.create=function(b){return b=a.prototype.create.call(this,b),b.mime=b.mime||void 0,b.base64=b.base64||void 0,b.url=b.url||void 0,b},b.prototype.draw=function(a,b,c){var d=new Image;d.onload=function(){a.drawImage(d,0,0,parseInt(a.canvas.getAttribute("width")),parseInt(a.canvas.getAttribute("height"))),c&&c(void 0,b)},d.onerror=function(a){c&&c(new Error("Unable to render image"),b)},d.crossOrigin="Anonymous",d.src=this.from(b,c)},b.prototype.getRenderingType=function(){return"background-image"},b.prototype.from=function(a,b){return a.base64?this.fromBase64(a):a.url?this.fromUrl(a):void b(new Error("Unable to read image data"),a)},b.prototype.fromBase64=function(a){return"data:"+a.mime+";base64,"+a.base64},b.prototype.fromUrl=function(a){return a.url},b}(g);a.BackgroundImageRenderer=j;var k=function(b){function c(a){b.call(this,a)}return __extends(c,b),c.prototype.create=function(b){return b||(b={type:this.getRenderingType()}),b.id=b.id||a.randomUid(),b.x=b.x||0,b.y=b.y||0,b.width=b.width||10,b.height=b.height||10,b.backgroundColor=b.backgroundColor||"#ffffff",b.foregroundColor=b.foregroundColor||"#000000",b.foregroundAlpha=b.foregroundAlpha||void 0,b.isFilled=a.isDefined(b.isFilled)&&null!=b.isFilled?b.isFilled:!1,b.isVisible=a.isDefined(b.isVisible)&&null!=b.isVisible?b.isVisible:!0,b.brushSize=b.brushSize||5,b.type=b.type||void 0,b},c.prototype.getBounds=function(a){return{x:a.width>0?a.x:a.x+a.width,y:a.height>0?a.y:a.y+a.height,width:Math.abs(a.width),height:Math.abs(a.height)}},c.prototype.contains=function(a,b,c){var d=this.getBounds(a);return d.x<b&&d.x+d.width>b&&d.y<c&&d.y+d.height>c},c.prototype.isValid=function(a){return Math.abs(a.width)>20&&Math.abs(a.height)>20},c.prototype.draw=function(a,b){a.lineWidth=b.brushSize>1?b.brushSize:1,a.strokeStyle=b.foregroundAlpha||b.foregroundColor,a.fillStyle=b.foregroundAlpha||b.foregroundColor,this.onDraw(a,b)},c.prototype.move=function(a,b,c,d,e,f){this.onMove(a,b,c,d,e,f)},c.prototype.invoke=function(a,b,c,d,e){this.onEvent(a,b,c,d,e)},c}(b);a.GraphicRenderer=k;var l=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.create=function(b){return b=a.prototype.create.call(this,b),b.points=b.points||[],b},b.prototype.calculateBounds=function(a){for(var b={x:a.x,y:a.y,width:a.x,height:a.y},c=0;c<a.points.length;c++){var d=a.points[c];b.x>d.x&&(b.x=d.x),b.y>d.y&&(b.y=d.y),b.width<d.x&&(b.width=d.x),b.height<d.y&&(b.height=d.y)}return b.width=b.width-b.x,b.height=b.height-b.y,b},b.prototype.getBounds=function(a){var b=this.calculateBounds(a);return(b.height-b.y<10||b.width-b.x<10)&&(b.y-=5,b.x-=5,b.height+=10,b.width+=10),b},b.prototype.isValid=function(a){var b=this.calculateBounds(a);return b.width>5||b.height>5},b.prototype.onDraw=function(a,b){a.beginPath(),a.moveTo(b.x,b.y);for(var c=0;c<b.points.length;c++)this.point=b.points[c],a.lineTo(this.point.x,this.point.y);b.isFilled?a.fill():a.stroke()},b.prototype.onMove=function(a,b,c,d,e,f){var g=b.x,h=b.y;b.x=b.x+(c-e),b.y=b.y+(d-f);for(var i=g-b.x,j=h-b.y,k=0;k<b.points.length;k++)b.points[k].x-=i,b.points[k].y-=j},b.prototype.onEvent=function(a,b,c,d,e){switch(c){case"mousemove":b.points.push({x:d,y:e})}},b.prototype.getRenderingType=function(){return"freeform"},b}(k);a.FreeformRenderer=l;var m=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.create=function(b){return b=a.prototype.create.call(this,b),b.endX=b.endX||b.x,b.endY=b.endY||b.y,b},b.prototype.getBounds=function(a){return{x:a.x<a.endX?a.x:a.endX,y:a.y<a.endY?a.y:a.endY,width:a.x>a.endX?a.x-a.endX:a.endX-a.x,height:a.y>a.endY?a.y-a.endY:a.endY-a.y}},b.prototype.isValid=function(a){return Math.abs(a.endX-a.x)>20||Math.abs(a.endY-a.y)>20},b.prototype.onDraw=function(a,b){a.beginPath(),a.moveTo(b.x,b.y),a.lineTo(b.endX,b.endY),a.stroke()},b.prototype.onMove=function(a,b,c,d,e,f){b.x=b.x+(c-e),b.y=b.y+(d-f),b.endX=b.endX+(c-e),b.endY=b.endY+(d-f)},b.prototype.onEvent=function(a,b,c,d,e){switch(c){case"mousedown":b.x=d,b.y=e;case"mousemove":b.endX=d,b.endY=e}},b.prototype.getRenderingType=function(){return"line"},b}(k);a.LineRenderer=m;var n=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.onDraw=function(a,b){b.isFilled?a.fillRect(b.x,b.y,b.width,b.height):a.strokeRect(b.x,b.y,b.width,b.height)},b.prototype.onMove=function(a,b,c,d,e,f){b.x=b.x+(c-e),b.y=b.y+(d-f)},b.prototype.onEvent=function(a,b,c,d,e){switch(c){case"mousemove":b.width=d-b.x,b.height=e-b.y}},b.prototype.getRenderingType=function(){return"rectangle"},b}(k);a.RectangleRenderer=n;var o=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.onEvent=function(a,b,c,d,e){switch(c){case"mousemove":b.width=d-b.x,b.height=e-b.y,b.width=b.width>b.height?b.height:b.width,b.height=b.width>b.height?b.height:b.width}},b.prototype.getRenderingType=function(){return"square"},b}(n);a.SquareRenderer=o;var p=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.create=function(b){return b=a.prototype.create.call(this,b),b.radius=b.radius||10,b},b.prototype.getBounds=function(a){return{x:a.x-a.radius,y:a.y-a.radius,width:2*a.radius,height:2*a.radius}},b.prototype.isValid=function(a){return a.radius>5},b.prototype.onDraw=function(a,b){a.beginPath(),a.arc(b.x,b.y,b.radius,0,2*Math.PI),b.isFilled?a.fill():a.stroke()},b.prototype.onEvent=function(a,b,c,d,e){switch(c){case"mousemove":b.radius=Math.abs(d-b.x)}},b.prototype.getRenderingType=function(){return"circle"},b}(n);a.CircleRenderer=p;var q=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.create=function(b){return b=a.prototype.create.call(this,b),b.radiusY=b.radiusY||5,b},b.prototype.getBounds=function(a){return{x:a.x-a.radius,y:a.y-a.radiusY,width:2*a.radius,height:2*a.radiusY}},b.prototype.isValid=function(a){return a.radius>10&&a.radiusY>10},b.prototype.onDraw=function(a,b){a.beginPath(),a.ellipse(b.x,b.y,b.radius,b.radiusY,0,0,2*Math.PI),b.isFilled?a.fill():a.stroke()},b.prototype.onEvent=function(a,b,c,d,e){switch(c){case"mousemove":b.radius=Math.abs(d-b.x),b.radiusY=Math.abs(e-b.y)}},b.prototype.getRenderingType=function(){return"oval"},b}(p);a.OvalRenderer=q;var r=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.onDraw=function(a,b){a.beginPath(),a.moveTo(b.x+b.width/2,b.y),a.lineTo(b.x,b.y+b.height),a.lineTo(b.x+b.width,b.y+b.height),a.closePath(),b.isFilled?a.fill():a.stroke()},b.prototype.getRenderingType=function(){return"triangle"},b}(n);a.TriangleRenderer=r;var s=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.create=function(b){return b||(b={isFilled:!0,height:25}),b=a.prototype.create.call(this,b),b.text=b.text||"",b.font=b.font||"verdana",b.fontWeight=b.fontWeight||"normal",b},b.prototype.isValid=function(a){return a.text&&a.text.length>0},b.prototype.onDraw=function(a,b){a.font=b.height+"px "+b.font,b.isFilled?(a.fillStyle=b.foregroundAlpha||b.foregroundColor,a.fillText(b.text,b.x,b.y+b.height)):(a.strokeStyle=b.foregroundAlpha||b.foregroundColor,a.strokeText(b.text,b.x,b.y+b.height))},b.prototype.onEvent=function(a,b,c,d,e){switch(c){case"mouseup":b.text=this.prompt("Insert text"),this.drawFocusRectangle(a,b),this.draw(a,b)}},b.prototype.drawFocusRectangle=function(a,b){var c=a.measureText(b.text);b.width=c.width,a.lineWidth=1,a.setLineDash([2,4]),a.strokeStyle=b.foregroundColor,a.rect(b.x,b.y,b.width,b.height)},b.prototype.prompt=function(a,b){return window.prompt(a,b)},b.prototype.getRenderingType=function(){return"text"},b}(n);a.TextRenderer=s}(Grafika||(Grafika={}));var Grafika;!function(a){var b=function(){function b(b){var c=this;this.grafika=b,this.undoActions=[],this.redoActions=[],this.clearActions=function(){c.undoActions=[],c.redoActions=[]},this.addAction=function(a){c.undoActions.push(a),c.redoActions=[]},this.canUndo=function(){return c.undoActions.length>0},this.canRedo=function(){return c.redoActions.length>0},this.undo=function(){if(!c.canUndo())return void a.log(c.grafika,"No undo!");var b=c.undoActions.pop();b.undo(),c.redoActions.push(b),a.log(c.grafika,"Undo: "+b.event);
},this.redo=function(){if(!c.canRedo())return void a.log(c.grafika,"No redo!");var b=c.redoActions.pop();b.redo(),c.undoActions.push(b),a.log(c.grafika,"Redo: "+b.event)}}return b}();a.CommandManager=b;var c=function(){function b(b,c,d){var e=this;this.undo=function(){e.performUndo(),e.grafika.refreshFrame()},this.redo=function(){e.performRedo(),e.grafika.refreshFrame()},this.getRenderer=function(){return e.grafika.getGraphicRenderer(e.graphic)},this.grafika=b,this.event=d,this.graphic=a.clone(c)}return b}();a.GraphicAction=c;var d=function(b){function c(c,d){b.call(this,c,d,a.EVT_GRAPHIC_CREATED)}return __extends(c,b),c.prototype.performUndo=function(){this.grafika.deleteGraphic(this.graphic.id,!1)},c.prototype.performRedo=function(){this.grafika.getFrame().layers[0].graphics.push(this.graphic)},c}(c);a.GraphicCreated=d;var e=function(b){function c(c,d){b.call(this,c,d,a.EVT_GRAPHIC_DELETED)}return __extends(c,b),c.prototype.performUndo=function(){this.grafika.frame.layers[0].graphics.push(this.graphic)},c.prototype.performRedo=function(){this.grafika.deleteGraphic(this.graphic.id,!1)},c}(c);a.GraphicDeleted=e;var f=function(b){function c(c,d,e){b.call(this,c,d,a.EVT_GRAPHIC_MOVED),this.previous=a.clone(e)}return __extends(c,b),c.prototype.performUndo=function(){this.grafika.deleteGraphic(this.graphic.id,!1),this.grafika.frame.layers[0].graphics.push(this.previous)},c.prototype.performRedo=function(){this.grafika.deleteGraphic(this.graphic.id,!1),this.grafika.frame.layers[0].graphics.push(this.graphic)},c}(c);a.GraphicMoved=f;var g=function(b){function c(c,d){b.call(this,c,d),this.event=a.EVT_GRAPHIC_PASTED}return __extends(c,b),c}(d);a.GraphicPasted=g}(Grafika||(Grafika={}));var Grafika;!function(a){function b(a){return"undefined"!=typeof a}function c(a){return"undefined"==typeof a}function d(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];a.isLogEnabled()&&0==b.length}function e(a){return(a||"")+("000000"+(Math.random()*Math.pow(36,6)<<0).toString(36)).slice(-6)}function f(a){a=a.replace(k,function(a,b,c,d){return b+b+c+c+d+d});var b=l.exec(a);return b?{r:parseInt(b[1],16),g:parseInt(b[2],16),b:parseInt(b[3],16)}:{r:0,g:0,b:0}}function g(a,b){var c=b.offsetX,d=b.offsetY;return b.changedTouches&&(c=b.changedTouches[0].pageX,d=b.changedTouches[0].pageY),{x:+(c*a.x).toFixed(1),y:+(d*a.y).toFixed(1)}}function h(a,b,c){var d=b-c.y,e=a-c.x;return Math.sqrt(Math.pow(d,2)+Math.pow(e,2))}function i(a){a.canvas.width=a.canvas.width,a.lineJoin="round",a.lineCap="round"}function j(a){return JSON.parse(JSON.stringify(a))}var k=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,l=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i;a.isDefined=b,a.isUndefined=c,a.log=d,a.randomUid=e,a.hexToRgb=f,a.calculateCoordinates=g,a.calculateFurthestDistance=h,a.clearCanvas=i,a.clone=j,function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b,c){var d=(new Date).getTime(),e=Math.max(0,16-(d-a)),f=window.setTimeout(function(){b(d+e)},e);return a=d+e,f}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){return clearTimeout(a)})}()}(Grafika||(Grafika={})),Grafika.Plugins.push(function(a){var b=function(){function a(a){var b=this;this.grafika=a,this.name="Extensions",this.version="1.0.0",this.imageQuality=100,this.getName=function(){return"["+b.name+" "+b.version+"]"},this.isLogEnabled=function(){return b.grafika.getOptions().debugMode},this.clearFrame=function(){b.grafika.clearFrame(),b.grafika.saveFrame()},this.deleteFrame=function(){var a=b.grafika.animation,c=a.currentFrame;0>c||(b.grafika.frames.splice(c,1),0==b.grafika.frames.length&&b.grafika.frames.push(b.frameRenderer.create()),c>b.grafika.frames.length-1&&(c=b.grafika.frames.length-1),a.currentFrame=c,b.grafika.frame=b.grafika.frames[a.currentFrame],b.grafika.navigateToFrame(a.currentFrame))},this.copyFrameToNext=function(){b.grafika.saveFrame();var a=b.grafika.getAnimation().currentFrame+1,c=JSON.parse(JSON.stringify(b.grafika.getFrame(),b.getJSONReplacer()));c.index=a,c.id=Grafika.randomUid(),b.grafika.frames[a]=b.frameRenderer.create(c),b.grafika.navigateToFrame(a),b.grafika.saveFrame(),Grafika.log(b,"Frame copied to next frame")},this.copyFrameToPrevious=function(){b.grafika.saveFrame();var a=b.grafika.getAnimation().currentFrame-1;if(!(0>a)){var c=JSON.parse(JSON.stringify(b.grafika.getFrame(),b.getJSONReplacer()));c.index=a,c.id=Grafika.randomUid(),b.grafika.frames[a]=b.frameRenderer.create(c),b.grafika.navigateToFrame(a),b.grafika.saveFrame(),Grafika.log(b,"Frame copied to previous frame")}},this.insertFrameAfter=function(){b.grafika.saveFrame();var a=b.grafika.animation.currentFrame,c=b.frameRenderer.create({index:a+1}),d=b.grafika.frame;b.grafika.frames.splice(a,0,c),b.grafika.frames[a]=d,b.grafika.frames[c.index]=c,b.grafika.animation.currentFrame=c.index,b.grafika.frame=b.grafika.frames[c.index],b.grafika.saveFrame(),b.grafika.navigateToFrame(b.grafika.animation.currentFrame),Grafika.log(b,"Frame inserted after current frame")},this.insertFrameBefore=function(){b.grafika.saveFrame();var a=b.grafika.animation.currentFrame;if(!(0>a)){var c=b.frameRenderer.create({index:a});b.grafika.frames.splice(a,0,c),b.grafika.frame=b.grafika.frames[a],b.grafika.saveFrame(),b.grafika.navigateToFrame(b.grafika.animation.currentFrame),Grafika.log(b,"Frame inserted before current frame")}},this.getFrameProperty=function(a){return b.grafika.frame[a]},this.deleteSelectedGraphics=function(){b.grafika.deleteSelectedGraphics(),b.grafika.saveFrame(),Grafika.log(b,"Selected graphics deleted")},this.copySelectedGraphics=function(){b.grafika.copySelectedGraphics(),Grafika.log(b,"Selected graphics copied")},this.pasteSelectedGraphics=function(){b.grafika.pasteSelectedGraphics(),b.grafika.saveFrame(),Grafika.log(b,"Selected graphics pasted")},this.downloadAnimation=function(){b.grafika.saveFrame(),window.open("data:application/json;charset=utf-8,"+JSON.stringify(b.grafika.getAnimation(),b.getJSONReplacer()))},this.downloadFrameAsImage=function(){b.grafika.saveFrame(),b.getCanvasData(function(a,b){a||window.open("data:image/png;base64,"+b.base64)})},this.getCanvasBlob=function(a){var c=void 0,d=void 0,e=b.captureOldOptions(),f=b.grafika.getRenderer("frame");if(f.drawBackground(b.grafika.contextBackground,b.grafika.getFrame(),function(g,h){f.draw(b.grafika.contextBackground,b.grafika.getFrame()),c=g;try{for(var i=atob(b.grafika.contextBackground.canvas.toDataURL("image/png",b.imageQuality).split(",")[1]),j=[],k=0;k<i.length;k++)j.push(i.charCodeAt(k));b.grafika.setOptions(e),d={mime:"image/png",blob:new Blob([new Uint8Array(j)])}}catch(l){c=l}a&&a(c,d)}),!a)var g=setInterval(function(){(Grafika.isDefined(c)||Grafika.isDefined(d))&&clearInterval(g)},100);return d},this.getCanvasData=function(a){var c=void 0,d=void 0,e=b.captureOldOptions(),f=b.grafika.getRenderer("frame");if(f.drawBackground(b.grafika.contextBackground,b.grafika.getFrame(),function(g,h){f.draw(b.grafika.contextBackground,b.grafika.getFrame()),c=g;try{var i=b.grafika.contextBackground.canvas.toDataURL("image/png",b.imageQuality),j=i.substring(i.indexOf("data:")+"data:".length,i.indexOf(";"));b.grafika.setOptions(e),b.grafika.refreshFrame({drawBackground:!0}),d={mime:j,base64:i.substring(i.indexOf(",")+",".length)}}catch(k){c=k}a&&a(c,d)}),!a)var g=setInterval(function(){(Grafika.isDefined(c)||Grafika.isDefined(d))&&clearInterval(g)},100);return d},this.frameRenderer=this.grafika.getRenderer("frame")}return a.prototype.captureOldOptions=function(){this.grafika.saveFrame();var a={useNavigationText:this.grafika.getOptions().useNavigationText,useCarbonCopy:this.grafika.getOptions().useCarbonCopy,drawingMode:this.grafika.getOptions().drawingMode};return this.grafika.setOptions({useNavigationText:!1,useCarbonCopy:!1,drawingMode:"none"}),a},a.prototype.getJSONReplacer=function(){return function(a,b){return"grafika"===a?void 0:b}},a}();return a.exts=new b(a)});
//# sourceMappingURL=grafika.js.map