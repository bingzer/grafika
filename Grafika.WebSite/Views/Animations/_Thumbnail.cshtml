@model Animation
@{
    Layout = null;
    var linkUrl = $"/animations/{Model.Id}/{Model.GenerateSlugUrl()}";
    var userIdentity = User.Identity as IUserIdentity;
    var canEdit = userIdentity?.Id == Model.UserId;
}
<article class="col-sm-6 col-md-4 col-lg-3 col-xl-2">
    <div class="thumbnail" style="height: 272px; position: relative; padding: 0">
        <figure>
            <a href="@linkUrl" style="height: 138px">
                <img src="@Model.GetThumbnailUrl()" alt="@Model.Name" style="height: 138px; max-height: 138px; width: 100%">
            </a>
        </figure>
        <div class="caption" style="font-size: smaller">
            <header>
                <h4 style="margin-bottom: 2px; margin-top: 2px">
                    <a href="@linkUrl" class="font-stronger">@Model.Name</a>
                    @if (Model.IsPublic == false)
                    {
                        <i class="fa fa-lock font-smaller text-muted" title="This Model.tion is private. Can only be viewed by you"></i>
                    }
                </h4>
            </header>
            <p style="margin-top: 0">
                <img src="@Model.GetAuthorThumbnail()" alt="@Model.Author" class="img-circle user-avatar" />
                <a href="/users/@Model.UserId">
                    @Model.Author
                </a>
            </p>
            <p style="word-wrap: break-word">
                @if (Model.Description.IsNullOrEmptyOrWhitespace())
                {
                    <span class="text-muted">(no description)</span>
                }
                else
                {
                    @Model.Description
                }
            </p>
            <p style="position: absolute; bottom: 8px; left: 8px; margin-bottom: 0;">
                @if (canEdit)
                {
                    <span class="pull-left font-smaller text-muted">
                        <a href="/animations/@Model.Id/edit" class="btn btn-xs btn-success">
                            Edit
                        </a>
                    </span>
                }
            </p>
            <p style="position: absolute; bottom: 8px; right: 8px; margin-bottom: 0;">
                <span class="font-smaller text-muted">
                    @Model.TotalFrame frames &#8226; @Model.Views views
                </span>
            </p>
        </div>
    </div>
</article>
