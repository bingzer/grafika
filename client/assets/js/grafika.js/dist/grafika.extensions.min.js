Grafika.Plugins.push(function(a){var b=function(){function b(a){this.grafika=a,this.name="Extensions",this.version="1.0.0",this.imageQuality=100}return b.prototype.copyFrameToNext=function(){this.grafika.saveFrame();var a=this.grafika.getAnimation().currentFrame+1,b=JSON.parse(JSON.stringify(this.grafika.getFrame(),this.getJSONReplacer()));b.index=a,b.id=this.randomUid();var c=this.grafika.getRenderer("frame");this.grafika.getAnimation().frames[a]=c.create(b),this.grafika.navigateToFrame(a),this.log("Frame copied to next frame")},b.prototype.downloadAnimation=function(){a.saveFrame(),window.open("data:text/json;charset=utf-8,"+JSON.stringify(a.getAnimation(),this.getJSONReplacer()))},b.prototype.downloadFrameAsImage=function(){a.saveFrame(),window.open("data:image/png;base64,"+this.getCanvasData().base64)},b.prototype.getCanvasBlob=function(){for(var b=this.captureOldOptions(),c=atob(a.getCanvas().toDataURL("image/png",this.imageQuality).split(",")[1]),d=[],e=0;e<c.length;e++)d.push(c.charCodeAt(e));return a.setOptions(b),new Blob([new Uint8Array(d)],{type:"image/png"})},b.prototype.getCanvasData=function(){var b=this.captureOldOptions(),c=a.getCanvas().toDataURL("image/png",this.imageQuality),d=c.substring(c.indexOf("data:")+"data:".length,c.indexOf(";"));return a.setOptions(b),{mime:d,base64:c.substring(c.indexOf(",")+",".length)}},b.prototype.randomUid=function(){return("000000"+(Math.random()*Math.pow(36,6)<<0).toString(36)).slice(-6)},b.prototype.log=function(a){},b.prototype.captureOldOptions=function(){a.saveFrame();var b={useNavigationText:a.getOptions().useNavigationText,useCarbonCopy:a.getOptions().useCarbonCopy,drawingMode:a.getOptions().drawingMode};return a.setOptions({useNavigationText:!1,useCarbonCopy:!1,drawingMode:"none"}),b},b.prototype.getJSONReplacer=function(){return function(a,b){return"grafika"===a?void 0:b}},b}();return a.exts=new b(a)});
//# sourceMappingURL=grafika.js.map